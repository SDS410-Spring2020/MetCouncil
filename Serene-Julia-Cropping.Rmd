---
title: "Serene-Julia-Cropping"
author: "Bouzaher, Julia"
date: "April 23, 2020"
output: html_document
---

```{r}
library(data.table)
library(sf)
library(sp)
library(raster)
library(dplyr)
library(rgdal)
library(rgeos)

# extent(landcover)
# e <- as(extent(460000, 465000, 4980000, 4990000), 'SpatialPolygons')
# 
# crs(landcover)
# crs(e) <- "+proj=utm +zone=15 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
# crs(e)
# cropped2 <- raster::crop(landcover,e)
# plot(cropped2, axes = TRUE)

xmax <- 521239.5
ymax <- 5029162
xrange <-  521239.5 - 419971.5 
yrange <- 5029162 -  4924218
firsty <- yrange/2

xcroprange <- 5000
ycroprange <- 4990000 - 4980000
yincrement <- yrange/3
xincrement <- xrange/10

e <- as(extent(460000, 465000, 4980000, 4990000), 'SpatialPolygons')

y1 <- c(4924218, 4924218+yincrement)
y2 <- c(4924218+yincrement, 4924218+2*yincrement)
y3 <- c(4924218+2*yincrement, 5029162)

x1 <- c(xmax - xincrement, xmax)
x2 <- c(xmax - 2*xincrement, xmax - xincrement)
x3 <- c(xmax - 3*xincrement, xmax - 2*xincrement)
x4 <- c(xmax - 4*xincrement, xmax - 3*xincrement)
x5 <- c(xmax - 5*xincrement, xmax - 4*xincrement)
x6 <- c(xmax - 6*xincrement, xmax - 5*xincrement)
x7 <- c(xmax - 7*xincrement, xmax - 6*xincrement)
x8 <- c(xmax - 8*xincrement, xmax - 7*xincrement)
x9 <- c(xmax - 9*xincrement, xmax - 8*xincrement)
x10 <- c(xmax - 10*xincrement, xmax - 9*xincrement)

#we want to split x into 10 and y into 3 fto obtain 30 blocks total
#xmin, xmax, ymin, ymax

crop1 <- as(extent(x1,y1), 'SpatialPolygons')
crop2 <- as(extent(x2,y1), 'SpatialPolygons')
crop3 <- as(extent(x3,y1), 'SpatialPolygons')
crop4 <- as(extent(x4,y1), 'SpatialPolygons')
crop5 <- as(extent(x5,y1), 'SpatialPolygons')
crop6 <- as(extent(x6,y1), 'SpatialPolygons')
crop7 <- as(extent(x7,y1), 'SpatialPolygons')
crop8 <- as(extent(x8,y1), 'SpatialPolygons')
crop9 <- as(extent(x9,y1), 'SpatialPolygons')
crop10 <- as(extent(x10,y1), 'SpatialPolygons')
crop11 <- as(extent(x1,y2), 'SpatialPolygons')
crop12 <- as(extent(x2,y2), 'SpatialPolygons')
crop13 <- as(extent(x3,y2), 'SpatialPolygons')
crop14 <- as(extent(x4,y2), 'SpatialPolygons')
crop15 <- as(extent(x5,y2), 'SpatialPolygons')
crop16 <- as(extent(x6,y2), 'SpatialPolygons')
crop17 <- as(extent(x7,y2), 'SpatialPolygons')
crop18 <- as(extent(x8,y2), 'SpatialPolygons')
crop19 <- as(extent(x9,y2), 'SpatialPolygons')
crop20 <- as(extent(x10,y2), 'SpatialPolygons')
crop21 <- as(extent(x1,y3), 'SpatialPolygons')
crop22 <- as(extent(x2,y3), 'SpatialPolygons')
crop23 <- as(extent(x3,y3), 'SpatialPolygons')
crop24 <- as(extent(x4,y3), 'SpatialPolygons')
crop25 <- as(extent(x5,y3), 'SpatialPolygons')
crop26 <- as(extent(x6,y3), 'SpatialPolygons')
crop27 <- as(extent(x7,y3), 'SpatialPolygons')
crop28 <- as(extent(x8,y3), 'SpatialPolygons')
crop29 <- as(extent(x9,y3), 'SpatialPolygons')
crop30 <- as(extent(x10,y3), 'SpatialPolygons')

```



```{r}

#actually cropping the dataframe with the bounds created above


land1 <- raster::crop(landcover,crop1)
land2 <- raster::crop(landcover,crop2)
land3 <- raster::crop(landcover,crop3)
land4 <- raster::crop(landcover,crop4)

land5 <- raster::crop(landcover,crop5)
land6 <- raster::crop(landcover,crop6)

land7 <- raster::crop(landcover,crop7)
land8 <- raster::crop(landcover,crop8)
land9 <- raster::crop(landcover,crop9)
land10 <- raster::crop(landcover,crop10)
land11 <- raster::crop(landcover,crop11)
land12 <- raster::crop(landcover,crop12)

land13 <- raster::crop(landcover,crop13)
land14 <- raster::crop(landcover,crop14)
land15 <- raster::crop(landcover,crop15)
land16 <- raster::crop(landcover,crop16)
land17 <- raster::crop(landcover,crop17)
land18 <- raster::crop(landcover,crop18)
land19 <- raster::crop(landcover,crop19)
land20 <- raster::crop(landcover,crop20)
land21 <- raster::crop(landcover,crop21)
land22 <- raster::crop(landcover,crop22)

land23 <- raster::crop(landcover,crop23)
land24 <- raster::crop(landcover,crop24)
land25 <- raster::crop(landcover,crop25)
```

```{r}
land26 <- raster::crop(landcover,crop26)
land27 <- raster::crop(landcover,crop27)
land28 <- raster::crop(landcover,crop28)
land29 <- raster::crop(landcover,crop29)
land30 <- raster::crop(landcover,crop30)

```

```{r}

tile1 <- raster::as.data.frame(land1, xy = TRUE)
tile2 <- raster::as.data.frame(land2, xy = TRUE)
tile3 <- raster::as.data.frame(land3, xy = TRUE)
tile4 <- raster::as.data.frame(land4, xy = TRUE)
tile5 <- raster::as.data.frame(land5, xy = TRUE)
tile6 <- raster::as.data.frame(land6, xy = TRUE)
tile7 <- raster::as.data.frame(land7, xy = TRUE)
tile8 <- raster::as.data.frame(land8, xy = TRUE)
tile9 <- raster::as.data.frame(land9, xy = TRUE)
tile10 <- raster::as.data.frame(land10, xy = TRUE)
tile11 <- raster::as.data.frame(land11, xy = TRUE)
tile12 <- raster::as.data.frame(land12, xy = TRUE)
tile13 <- raster::as.data.frame(land13, xy = TRUE)
tile14 <- raster::as.data.frame(land14, xy = TRUE)
tile15 <- raster::as.data.frame(land15, xy = TRUE)
tile16 <- raster::as.data.frame(land16, xy = TRUE)
tile17 <- raster::as.data.frame(land17, xy = TRUE)
tile18 <- raster::as.data.frame(land18, xy = TRUE)
tile19 <- raster::as.data.frame(land19, xy = TRUE)
tile20 <- raster::as.data.frame(land20, xy = TRUE)
tile21 <- raster::as.data.frame(land21, xy = TRUE)
tile22 <- raster::as.data.frame(land22, xy = TRUE)
tile23 <- raster::as.data.frame(land23, xy = TRUE)
tile24 <- raster::as.data.frame(land24, xy = TRUE)
tile25 <- raster::as.data.frame(land25, xy = TRUE)
tile26 <- raster::as.data.frame(land26, xy = TRUE)
tile27 <- raster::as.data.frame(land27, xy = TRUE)
tile28 <- raster::as.data.frame(land28, xy = TRUE)
tile29 <- raster::as.data.frame(land29, xy = TRUE)
tile30 <- raster::as.data.frame(land30, xy = TRUE)


memory.limit(size = 30000)
memory.size(max = NA)
```


```{r}

#let's try this again




```


